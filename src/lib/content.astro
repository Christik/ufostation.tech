---
import { getLocale } from "src/locales";

export const formatFullDate = (datetime: string) => new Date(datetime).toLocaleDateString(getLocale(), {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
});

export const formatShortDate = (datetime: string) => new Date(datetime).toLocaleDateString(getLocale(), {
    month: 'short',
    day: 'numeric',
});

export const calculateReadingTime = (content) => {
    if (!content) {
      return 0;
    }

    const WORDS_PER_MINUTE = 150;
    const clean = content.trim();
    const numberOfWords = clean.split(/\s/g).length;

    return Math.ceil(numberOfWords / WORDS_PER_MINUTE);
  }

export const declOfNum = (n: number, titles: [string, string, string]) => {
    return titles[(n % 10 === 1 && n % 100 !== 11) ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2]
}

export const getReadingTime = (content, titles) => {
  const readingTime = calculateReadingTime(content);
  const minutes = declOfNum(readingTime, titles);

  return `${readingTime} ${minutes}`;
}
---